# Nginx + 蓝绿部署概述

## 目标

实现零停机部署，用户请求不中断。

## 架构

```
                    ┌─────────────┐
    用户请求 ──────▶│   Nginx     │
                    │  :80/:443   │
                    └──────┬──────┘
                           │
            ┌──────────────┴──────────────┐
            ▼                              ▼
    ┌───────────────┐            ┌───────────────┐
    │  蓝 (Blue)    │            │  绿 (Green)   │
    │  :8001        │            │  :8002        │
    │  当前版本     │            │  新版本       │
    └───────────────┘            └───────────────┘
```

## 切换流程

1. 启动新版本（绿 :8002）
2. 健康检查通过
3. Nginx 热切换流量到 :8002
4. 优雅关闭旧版本（蓝 :8001）
5. 下次部署时角色互换

## 优势

| 优势     | 说明               |
| -------- | ------------------ |
| 零停机   | 切换瞬间完成       |
| 秒级回滚 | 切回旧端口即可     |
| 预热测试 | 新版本可先内部测试 |

## 相关文档

- [Nginx 配置](./02_Nginx配置.md)
- [部署脚本](./03_部署脚本.md)
- [回滚流程](./04_回滚流程.md)
