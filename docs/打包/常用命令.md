# service 位置

/etc/systemd/system/online_show.service

# 首次安装 service 文件

## 复制 service 文件到系统目录

sudo cp docs/打包/manager.service /etc/systemd/system/test_template.service

## 或者如果在打包目录下

sudo cp ./manager.service /etc/systemd/system/test_template.service

## 设置可执行权限

sudo chmod 644 /etc/systemd/system/online_show.service

## 重新加载并启用服务

sudo systemctl daemon-reload
sudo systemctl enable online_show.service
sudo systemctl start online_show.service

## 查看状态

sudo systemctl status online_show

---

# 日常管理

## 重新加载 systemd 配置

sudo systemctl daemon-reload

## 重启服务

sudo systemctl restart online_show

## 查看服务状态

sudo systemctl status online_show

## 查看日志（应该看到"生产环境"字样）

sudo journalctl -u online_show -n 50 --no-pager

# 查看实时打印

sudo journalctl -u test_template -f

# 部署 bash 防止部分乱码

sed -i 's/\r$//' docs/打包/build-on-linux.sh && bash docs/打包/build-on-linux.sh

# 查看 log

## 实时查看今天的日志

tail -f /root/project/online_show/static/logs/app_2025-11-16.log

## 查看最近 100 行

tail -n 100 /root/project/online_show/static/logs/app_2025-11-09.log

## 查看所有日志文件

ls -lh /root/project/online_show/static/logs/

## 搜索错误信息

grep -i error /root/project/online_show/static/logs/app_2025-11-09.log

## 搜索警告信息

grep -i warn /root/project/online_show/static/logs/app_2025-11-09.log

# 配置文件

## 覆盖文件

sudo cp ./online_show.service /etc/systemd/system/online_show.service

## 重载并重启

sudo systemctl daemon-reload
sudo systemctl restart online_show

# cmd 批量清理端口

3005-3011
for /L %i in (3005,1,3011) do @for /f "tokens=5" %a in ('netstat -aon ^| findstr ":%i"') do @taskkill /f /pid %a >nul 2>&1

# 打印文件树

find . -print 2>/dev/null | awk '!/\.$/ {for (i=1; i<NF; i++){printf("%4s","|")} print("--"$NF)}' FS='/';

# 查看 log 最新方法

sudo tail -f /var/log/syslog | grep test_template

# 查看 log 最新方法 2

sudo journalctl -u test_template -f

## 如果看不了 需要重启（很重要）

### 重启 journald

sudo systemctl restart systemd-journald

### 重启你的服务（让新日志被记录）

sudo systemctl restart test_template

### 稍等几秒后查看

sudo journalctl -u test_template -f
