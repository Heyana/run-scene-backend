# 缺失功能

作为模板项目，以下功能建议补充。

---

## ✅ 已实现

以下功能已于 2024-12 实现：

| 功能             | 文件                     | 状态      |
| ---------------- | ------------------------ | --------- |
| JWT 认证中间件   | `middleware/auth.go`     | ✅ 已实现 |
| 优雅关闭         | `server/graceful.go`     | ✅ 已实现 |
| 请求验证         | `utils/validator.go`     | ✅ 已实现 |
| 分页工具         | `utils/pagination.go`    | ✅ 已实现 |
| Panic 恢复中间件 | `middleware/recovery.go` | ✅ 已实现 |

> 使用前请运行 `go mod tidy` 更新依赖

---

## 待实现

### 1. Dockerfile

> 现代部署标配

**建议文件**:

- `Dockerfile` - 多阶段构建
- `docker-compose.yml` - 开发环境编排

---

### 2. 单元测试

**建议结构**:

```
tests/
├── api_test.go
├── service_test.go
└── testutil/
    └── setup.go
```

---

### 3. Redis 缓存

```go
// cache/redis.go
type CacheService interface {
    Get(key string) (interface{}, error)
    Set(key string, value interface{}, ttl time.Duration) error
    Delete(key string) error
}
```

---

### 4. Makefile

```makefile
.PHONY: build run test lint

build:
    go build -o bin/server ./main.go

run:
    air

test:
    go test ./...

lint:
    golangci-lint run
```

---

### 5. 健康检查增强

```go
// api/health.go
type HealthStatus struct {
    Status   string
    DB       bool
    Uptime   int64
}

// GET /health      - 存活探针
// GET /ready       - 就绪探针 (含DB检查)
```

---

## 实施建议

| 序号 | 功能       | 工作量 | 状态        |
| ---- | ---------- | ------ | ----------- |
| 1    | JWT 认证   | 2-3h   | ✅ 已完成   |
| 2    | 优雅关闭   | 1h     | ✅ 已完成   |
| 3    | 请求验证   | 1h     | ✅ 已完成   |
| 4    | 分页工具   | 0.5h   | ✅ 已完成   |
| 5    | Panic 恢复 | 0.5h   | ✅ 已完成   |
| 6    | Dockerfile | 1h     | ⏳ 待实现   |
| 7    | 单元测试   | 持续   | ⏳ 待实现   |
| 8    | Redis 缓存 | 2h     | ⏳ 按需添加 |

## 相关文档

- [项目概述](./01_项目概述.md)
- [项目架构](./02_项目架构.md)
- [现有功能](./03_现有功能.md)
