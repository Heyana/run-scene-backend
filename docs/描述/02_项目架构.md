# 项目架构

## 目录结构

```
golang_server_air_template/
├── main.go              # Air 入口 (dev模式)
├── app.go               # Wails 入口
├── config.yaml          # 配置文件
│
├── api/                 # API层
│   ├── routes.go        # 路由注册
│   ├── security_middleware.go  # 安全中间件
│   └── docs.go          # API文档
│
├── controllers/         # 控制器
│   ├── backup_controller.go
│   ├── extension_controller.go
│   ├── library_controller.go
│   ├── media_controller.go
│   └── security_controller.go
│
├── services/            # 服务层
│   ├── backup_service.go
│   ├── backup_scheduler.go
│   ├── cdn_service.go
│   ├── cdn_backup_service.go
│   └── resource_service.go
│
├── models/              # 数据模型
│   ├── models.go        # 核心模型
│   └── backup_record.go
│
├── database/            # 数据库
│   ├── database.go      # 连接与初始化
│   └── migrations.go    # 迁移
│
├── config/              # 配置
│   ├── config.go        # 配置加载
│   └── backup_config.go
│
├── middleware/          # 中间件
│   ├── auth.go          # JWT认证
│   └── recovery.go      # Panic恢复
├── response/            # 响应封装
├── logger/              # 日志
├── utils/               # 工具
├── core/                # 核心逻辑
├── bootstrap/           # 启动引导
├── server/              # 服务器
├── static/              # 静态资源
└── website/             # 网站文件
```

## 分层架构

```
┌─────────────────────────────────────┐
│            API Layer                │  routes.go, middleware
├─────────────────────────────────────┤
│         Controller Layer            │  controllers/*
├─────────────────────────────────────┤
│          Service Layer              │  services/*
├─────────────────────────────────────┤
│           Model Layer               │  models/*
├─────────────────────────────────────┤
│         Database Layer              │  database/*, GORM
└─────────────────────────────────────┘
```

## 配置优先级

```
环境变量 > config.yaml > 默认值
```

## 相关文档

- [项目概述](./01_项目概述.md)
- [现有功能](./03_现有功能.md)
- [缺失功能](./04_缺失功能.md)
