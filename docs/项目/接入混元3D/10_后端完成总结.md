# æ··å…ƒ3Dæ¥å…¥ - åç«¯å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### é˜¶æ®µ1ï¼šåŸºç¡€è®¾æ–½

- âœ… æ•°æ®æ¨¡å‹ï¼ˆ`models/hunyuan/`ï¼‰
  - `task.go` - ä»»åŠ¡è¡¨
  - `config.go` - é…ç½®è¡¨
- âœ… é…ç½®ç®¡ç†ï¼ˆ`config/config.go`ï¼‰
  - æ·»åŠ HunyuanConfigç»“æ„
  - é…ç½®åŠ è½½é€»è¾‘
  - ç¯å¢ƒå˜é‡æ”¯æŒ
- âœ… é…ç½®ç¤ºä¾‹ï¼ˆ`config.example.yaml`ï¼‰
- âœ… æ•°æ®åº“è¿ç§»æ³¨å†Œï¼ˆ`database/database.go`ï¼‰

### é˜¶æ®µ2ï¼šæ ¸å¿ƒæœåŠ¡

- âœ… APIå®¢æˆ·ç«¯ï¼ˆ`services/hunyuan/client.go`ï¼‰
  - è…¾è®¯äº‘APIç­¾åv3å®ç°
  - SubmitJob - æäº¤ä»»åŠ¡
  - QueryJob - æŸ¥è¯¢ä»»åŠ¡
- âœ… é…ç½®æœåŠ¡ï¼ˆ`services/hunyuan/config_service.go`ï¼‰
  - GetConfig - è·å–é…ç½®
  - UpdateConfig - æ›´æ–°é…ç½®
  - GetClient - è·å–APIå®¢æˆ·ç«¯
  - ValidateConfig - é…ç½®éªŒè¯
  - TestConnection - æµ‹è¯•è¿æ¥
- âœ… ä»»åŠ¡æœåŠ¡ï¼ˆ`services/hunyuan/task_service.go`ï¼‰
  - CreateTask - åˆ›å»ºä»»åŠ¡ï¼ˆå«å¹¶å‘æ§åˆ¶ï¼‰
  - GetTaskStatus - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
  - PollTask - è½®è¯¢ä»»åŠ¡
  - ListTasks - ä»»åŠ¡åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰
  - CancelTask - å–æ¶ˆä»»åŠ¡
  - RetryTask - é‡è¯•ä»»åŠ¡
  - DeleteTask - åˆ é™¤ä»»åŠ¡
  - GetStatistics - ç»Ÿè®¡ä¿¡æ¯
- âœ… å­˜å‚¨æœåŠ¡ï¼ˆ`services/hunyuan/storage_service.go`ï¼‰
  - SaveTaskResult - ä¿å­˜ä»»åŠ¡ç»“æœ
  - downloadFile - ä¸‹è½½æ–‡ä»¶
  - æœ¬åœ°å­˜å‚¨æ”¯æŒ
  - NASå­˜å‚¨æ”¯æŒ
  - æ–‡ä»¶å“ˆå¸Œå’Œå»é‡
  - DeleteFiles - åˆ é™¤æ–‡ä»¶
  - GetAccessURL - ç”Ÿæˆè®¿é—®URL

### é˜¶æ®µ3ï¼šAPIæ¥å£

- âœ… æ§åˆ¶å™¨ï¼ˆ`controllers/hunyuan_controller.go`ï¼‰
  - SubmitTask - æäº¤ä»»åŠ¡
  - GetTask - è·å–ä»»åŠ¡è¯¦æƒ…
  - ListTasks - ä»»åŠ¡åˆ—è¡¨
  - PollTask - è½®è¯¢ä»»åŠ¡
  - CancelTask - å–æ¶ˆä»»åŠ¡
  - RetryTask - é‡è¯•ä»»åŠ¡
  - DeleteTask - åˆ é™¤ä»»åŠ¡
  - GetStatistics - è·å–ç»Ÿè®¡ä¿¡æ¯
  - GetConfig - è·å–é…ç½®
  - UpdateConfig - æ›´æ–°é…ç½®
  - ValidateConfig - éªŒè¯é…ç½®
- âœ… è·¯ç”±æ³¨å†Œï¼ˆ`api/routes.go`ï¼‰
  - æ³¨å†Œæ‰€æœ‰APIè·¯ç”±
  - æ·»åŠ æ··å…ƒ3Dæ–‡ä»¶é™æ€æœåŠ¡

## ğŸ“‹ APIç«¯ç‚¹åˆ—è¡¨

```
POST   /api/hunyuan/tasks              æäº¤ä»»åŠ¡
GET    /api/hunyuan/tasks              ä»»åŠ¡åˆ—è¡¨
GET    /api/hunyuan/tasks/:id          è·å–ä»»åŠ¡è¯¦æƒ…
POST   /api/hunyuan/tasks/:id/poll     è½®è¯¢ä»»åŠ¡
POST   /api/hunyuan/tasks/:id/cancel   å–æ¶ˆä»»åŠ¡
POST   /api/hunyuan/tasks/:id/retry    é‡è¯•ä»»åŠ¡
DELETE /api/hunyuan/tasks/:id          åˆ é™¤ä»»åŠ¡
GET    /api/hunyuan/statistics         è·å–ç»Ÿè®¡ä¿¡æ¯
GET    /api/hunyuan/config             è·å–é…ç½®
PUT    /api/hunyuan/config             æ›´æ–°é…ç½®
POST   /api/hunyuan/config/validate    éªŒè¯é…ç½®

GET    /hunyuan/*filepath              æ··å…ƒ3Dæ–‡ä»¶é™æ€æœåŠ¡
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

1. **é»˜è®¤é…ç½®**
   - æ¨¡å‹ç‰ˆæœ¬ï¼š3.1
   - PBRæè´¨ï¼šå¯ç”¨
   - è¾“å‡ºæ ¼å¼ï¼šGLB
   - æœ€å¤§å¹¶å‘ï¼š3ä¸ªä»»åŠ¡
   - è½®è¯¢é—´éš”ï¼š5ç§’

2. **å­˜å‚¨æ”¯æŒ**
   - æœ¬åœ°å­˜å‚¨ï¼š`static/hunyuan/`
   - NASå­˜å‚¨ï¼šæ”¯æŒWindows SMBå…±äº«
   - æ–‡ä»¶å»é‡ï¼šåŸºäºSHA256å“ˆå¸Œ
   - è‡ªåŠ¨ç›®å½•ï¼šæŒ‰å¹´æœˆç»„ç»‡ï¼ˆ2006/01ï¼‰

3. **ä»»åŠ¡ç®¡ç†**
   - å¹¶å‘æ§åˆ¶ï¼šæœ€å¤š3ä¸ªåŒæ—¶è¿è¡Œ
   - çŠ¶æ€è·Ÿè¸ªï¼šWAIT/RUN/DONE/FAIL
   - è‡ªåŠ¨è½®è¯¢ï¼šæ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨è½®è¯¢
   - é”™è¯¯é‡è¯•ï¼šæ”¯æŒå¤±è´¥ä»»åŠ¡é‡è¯•

4. **å®‰å…¨æ€§**
   - APIå¯†é’¥è„±æ•ï¼šå“åº”ä¸­éšè—SecretKey
   - é…ç½®éªŒè¯ï¼šæäº¤å‰éªŒè¯å‚æ•°
   - ç”¨æˆ·è¿½è¸ªï¼šè®°å½•åˆ›å»ºè€…å’ŒIP

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```bash
HUNYUAN_SECRET_ID=your_secret_id
HUNYUAN_SECRET_KEY=your_secret_key
HUNYUAN_REGION=ap-guangzhou
HUNYUAN_NAS_ENABLED=true
HUNYUAN_NAS_PATH=\\192.168.3.10\project\hunyuan
```

### YAMLé…ç½®

```yaml
hunyuan:
  secret_id: "your_secret_id"
  secret_key: "your_secret_key"
  region: "ap-guangzhou"
  default_model: "3.1"
  default_enable_pbr: true
  default_result_format: "GLB"
  max_concurrent: 3
  poll_interval: 5
  local_storage_enabled: true
  storage_dir: "static/hunyuan"
  nas_enabled: false
  nas_path: ""
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### 1. é…ç½®APIå¯†é’¥

```bash
# æ–¹å¼1ï¼šç¯å¢ƒå˜é‡
export HUNYUAN_SECRET_ID="your_id"
export HUNYUAN_SECRET_KEY="your_key"

# æ–¹å¼2ï¼šconfig.yaml
# ç¼–è¾‘ config.yaml æ–‡ä»¶

# æ–¹å¼3ï¼šAPIæ¥å£
curl -X PUT http://localhost:23357/api/hunyuan/config \
  -H "Content-Type: application/json" \
  -d '{
    "secretId": "your_id",
    "secretKey": "your_key"
  }'
```

### 2. æäº¤æ–‡ç”Ÿ3Dä»»åŠ¡

```bash
curl -X POST http://localhost:23357/api/hunyuan/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "inputType": "text",
    "prompt": "ä¸€åªå¯çˆ±çš„å°çŒ«"
  }'
```

### 3. æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

```bash
curl http://localhost:23357/api/hunyuan/tasks/1
```

### 4. è½®è¯¢ä»»åŠ¡

```bash
curl -X POST http://localhost:23357/api/hunyuan/tasks/1/poll
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨**
   - éœ€è¦é…ç½®è…¾è®¯äº‘APIå¯†é’¥
   - ç¡®ä¿ `static/hunyuan` ç›®å½•å­˜åœ¨æˆ–æœ‰åˆ›å»ºæƒé™
   - NASè·¯å¾„éœ€è¦æœ‰è¯»å†™æƒé™

2. **å¹¶å‘é™åˆ¶**
   - é»˜è®¤æœ€å¤š3ä¸ªå¹¶å‘ä»»åŠ¡
   - è¶…å‡ºé™åˆ¶ä¼šè¿”å›409é”™è¯¯
   - å¯é€šè¿‡é…ç½®è°ƒæ•´

3. **æ–‡ä»¶å­˜å‚¨**
   - æœ¬åœ°å­˜å‚¨ï¼šè‡ªåŠ¨åˆ›å»ºç›®å½•
   - NASå­˜å‚¨ï¼šéœ€è¦é¢„å…ˆé…ç½®SMBå…±äº«
   - æ–‡ä»¶æŒ‰å¹´æœˆç»„ç»‡ï¼š`2006/01/hash.glb`

4. **ä»»åŠ¡æœ‰æ•ˆæœŸ**
   - è…¾è®¯äº‘ä»»åŠ¡IDæœ‰æ•ˆæœŸ24å°æ—¶
   - å»ºè®®åŠæ—¶è½®è¯¢ä»»åŠ¡
   - è¶…æœŸä»»åŠ¡æ— æ³•æŸ¥è¯¢

## ğŸš€ ä¸‹ä¸€æ­¥

ç»§ç»­å®ç°**å‰ç«¯ç•Œé¢**ï¼š

1. åˆ›å»ºVue3 + TSXç»„ä»¶
2. å®ç°ä»»åŠ¡æäº¤è¡¨å•
3. å®ç°ä»»åŠ¡åˆ—è¡¨å’ŒçŠ¶æ€æ˜¾ç¤º
4. é›†æˆåˆ°ç¼–è¾‘å™¨Tab
