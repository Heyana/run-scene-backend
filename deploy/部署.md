# 1. 上传到 NAS

scp 3d-editor-backend-linux.tar.gz admin@nas-ip:/volume1/docker/

# 2. SSH 连接

ssh admin@nas-ip

# 3. 解压

cd /volume1/docker/3d-editor-backend
tar -xzf 3d-editor-backend-linux.tar.gz

# 4. 安装

chmod +x install.sh
./install.sh

# 5. 配置

nano config.yaml

# 6. 启动

sudo systemctl start 3d-editor-backend

nas_enabled: true
nas_path: /vol1/1003/project/editor_v2/static/textures

打包

pscp app-linux LiLeng@192.168.3.10:/vol1/1003/project/editor_v2/app-linux

wsl bash -c "cd /mnt/e/hxy/my-project/run-scene-backend && /usr/local/go/bin/go build -o app-linux main.go"

chmod +x app-linux
chmod +x app-linux && sudo systemctl start 3d-editor-backend && sudo systemctl status 3d-editor-backend

# 启动

sudo systemctl start 3d-editor-backend

# 停止

sudo systemctl stop 3d-editor-backend

# 重启

sudo systemctl restart 3d-editor-backend

# 查看状态

sudo systemctl status 3d-editor-backend

# 查看日志

sudo journalctl -u 3d-editor-backend -f
tail -f logs/app.log

# SSH 到 NAS

ssh LiLeng@192.168.3.10

# 进入目录

cd /vol1/1003/project/editor_v2/deploy

# 停止旧服务

pkill -f app-linux

# 备份旧文件

mv app-linux app-linux.old

# 使用新文件

mv app-linux-fixed app-linux

# 赋予执行权限

chmod +x app-linux

# 启动

nohup ./app-linux > logs/app.log 2>&1 &

# 查看日志

tail -f logs/app.log

# ========== Mihomo 代理配置 ==========

cd /vol1/1003/app

# 如果还没有 mihomo，下载并解压

# wget https://github.com/MetaCubeX/mihomo/releases/download/v1.19.19/mihomo-linux-amd64-v1.19.19.gz

# gunzip mihomo-linux-amd64-v1.19.19.gz

# mv mihomo-linux-amd64-v1.19.19 mihomo

# chmod +x mihomo

# 启动 mihomo（指定配置目录，避免权限问题）

cd /vol1/1003/app
nohup ./mihomo -d ./mihomo-config > mihomo.log 2>&1 &

# 查看日志

tail -f mihomo.log

# 测试代理

curl -x http://127.0.0.1:7890 https://www.google.com

# 停止 mihomo

pkill -f mihomo

# 代理地址:

# HTTP: http://127.0.0.1:7890

# SOCKS: socks5://127.0.0.1:7891

# API: http://127.0.0.1:9090

# 进入后端目录

cd /vol1/1003/project/editor_v2/deploy

# 编辑配置

nano config.yaml

# 安装 Blender

sudo apt install -y blender

# 命令行渲染预览图

blender -b model.fbx -o /tmp/preview.png -f 1 --python render_script.py

# 快速模式（默认）

blender -b -P render_fbx.py -- model.fbx preview1.png

# GLB 格式

blender -b -P render_fbx.py -- model.glb preview2.png

# OBJ 格式

blender -b -P render_fbx.py -- model.obj preview3.png

# 指定分辨率

blender -b -P render_fbx.py -- model.fbx preview.png 1920 1080

# 高质量模式

blender -b -P render_fbx.py -- model.fbx preview.png 1280 720 high

# 找到 Blender 的 Python 路径

blender --background --python-expr "import sys; print(sys.executable)"

# 安装 numpy（使用 Blender 自带的 pip）

/usr/bin/python3 -m pip install numpy

# 或者直接用系统 Python 安装

sudo apt install python3-numpy

# 下载 Blender 3.6 或更高版本

wget https://download.blender.org/release/Blender3.6/blender-3.6.15-linux-x64.tar.xz
tar -xf blender-3.6.15-linux-x64.tar.xz
sudo mv blender-3.6.15-linux-x64 /opt/blender

sudo ln -sf /opt/blender/blender /usr/local/bin/blender

<!-- 移到bin -->

tar -xf blender-3.6.15-linux-x64.tar.xz
sudo mv blender-3.6.15-linux-x64 /user/bin

# 查看最近 100 行日志

sudo journalctl -u 3d-editor-backend -n 100

# 查看最近 100 行并持续跟踪

sudo journalctl -u 3d-editor-backend -n 100 -f

# 查看从启动开始的所有日志

sudo journalctl -u 3d-editor-backend --no-pager

# 查看最近 500 行

sudo journalctl -u 3d-editor-backend -n 500

# 查看今天的所有日志

sudo journalctl -u 3d-editor-backend --since today
